<div class="dashboard-page">
  <div class="welcome-section" *ngIf="user">
    <h1 class="page-title">{{ lang.t('account.welcome') }}, {{ user.profile?.firstName || 'User' }}!</h1>
    <p class="page-subtitle">{{ lang.t('accountDash.accountSettings') }}</p>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <div class="spinner"><i class="fas fa-spinner fa-spin"></i></div>
    <p>{{ lang.t('common.loading') }}</p>
  </div>

  <!-- Stats Cards -->
  <div class="stats-grid" *ngIf="!isLoading">
    <div class="stat-card">
      <div class="stat-icon">
        <i class="fas fa-shopping-bag"></i>
      </div>
      <div class="stat-content">
        <div class="stat-value">{{ stats.totalOrders }}</div>
        <div class="stat-label">{{ lang.t('account.totalOrders') }}</div>
        <a routerLink="/account/orders" class="stat-link">{{ lang.t('accountDash.viewAll') }} →</a>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon pending">
        <i class="fas fa-clock"></i>
      </div>
      <div class="stat-content">
        <div class="stat-value">{{ stats.pendingOrders }}</div>
        <div class="stat-label">{{ lang.t('account.pendingOrders') }}</div>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon wishlist">
        <i class="fas fa-heart"></i>
      </div>
      <div class="stat-content">
        <div class="stat-value">{{ stats.wishlistItems }}</div>
        <div class="stat-label">{{ lang.t('account.wishlistItems') }}</div>
        <a routerLink="/wishlist" class="stat-link">{{ lang.t('account.viewAll') }} →</a>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon addresses">
        <i class="fas fa-map-marker-alt"></i>
      </div>
      <div class="stat-content">
        <div class="stat-value">{{ stats.addresses }}</div>
        <div class="stat-label">{{ lang.t('account.savedAddresses') }}</div>
        <a routerLink="/account/addresses" class="stat-link">{{ lang.t('accountDash.manage') }} →</a>
      </div>
    </div>
  </div>

  <!-- Recent Orders -->
  <div class="recent-orders" *ngIf="!isLoading && recentOrders.length > 0">
    <div class="section-header">
      <h2>{{ lang.t('accountDash.recentOrders') }}</h2>
      <a routerLink="/account/orders" class="view-all-link">{{ lang.t('accountDash.viewAllOrders') }}</a>
    </div>

    <div class="orders-table">
      <table>
        <thead>
          <tr>
            <th>{{ lang.t('accountOrders.orderId') }}</th>
            <th>{{ lang.t('accountOrders.date') }}</th>
            <th>{{ lang.t('accountOrders.items') }}</th>
            <th>{{ lang.t('accountOrders.total') }}</th>
            <th>{{ lang.t('accountOrders.status') }}</th>
            <th>{{ lang.t('accountOrders.actions') }}</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let order of recentOrders">
            <td><strong>#{{ order._id.slice(-6) }}</strong></td>
            <td>{{ order.createdAt | date: (lang.isArabic() ? 'd MMM، y' : 'MMM d, y') }}</td>
            <td>{{ order.items.length }} {{ lang.t('account.items') }}</td>
            <td>${{ order.total.toFixed(2) }}</td>
            <td>
              <span class="badge" [ngClass]="getStatusClass(order.status)">
                {{ order.status }}
              </span>
            </td>
            <td>
              <a [routerLink]="['/account/orders']" class="btn-sm btn-primary">{{ lang.t('account.view') }}</a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="!isLoading && recentOrders.length === 0">
    <i class="fas fa-shopping-cart"></i>
    <h3>{{ lang.t('accountDash.noOrders') }}</h3>
    <p>{{ lang.t('accountDash.startShopping') }}</p>
    <a routerLink="/products" class="btn-primary">{{ lang.t('home.viewAllProducts') || lang.t('products.title') }}</a>
  </div>

  <!-- Quick Actions -->
  <div class="quick-actions" *ngIf="!isLoading">
    <h2>{{ lang.t('accountDash.quickActions') }}</h2>
    <div class="actions-grid">
      <a routerLink="/account/profile" class="action-card">
        <i class="fas fa-user-edit"></i>
        <span>{{ lang.t('accountDash.updateProfile') }}</span>
      </a>
      <a routerLink="/account/addresses" class="action-card">
        <i class="fas fa-plus"></i>
        <span>{{ lang.t('accountDash.manageAddresses') }}</span>
      </a>
      <a routerLink="/products" class="action-card">
        <i class="fas fa-shopping-bag"></i>
        <span>{{ lang.t('home.shopNow') }}</span>
      </a>
      <a routerLink="/wishlist" class="action-card">
        <i class="fas fa-heart"></i>
        <span>{{ lang.t('nav.wishlist') }}</span>
      </a>
    </div>
  </div>
</div>

